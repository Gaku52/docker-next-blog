---
title: 'JavaScript/ES2015基礎学習①'
excerpt: 'フロントエンド言語を学習する際に必須なJavaScriptの基礎を習得していきます。'
coverImage: '/assets/blog/JavaScript/ES2015.png'
date: '2022-12-22'
ogImage:
  url: '/assets/blog/JavaScript/ES2015.png'
tags:
  - 'JavaScript/'
  - 'ES2015'
---

## ◆JavaScriptとは？

JavaScriptはWEBブラウザの中で動くプログラミング言語です。WEBサイトで操作をしたときに表示が書き換わったり、WEBサイトのサーバーと通信してデータを取得したりと現在のWEBサイトには欠かせないプログラミング言語です。このようなJavaScriptを活用してアプリケーションのように操作できるWEBサイトをWEBアプリとも言います。  

JavaScriptはWEBブラウザだけではなく、Node.jsというサーバー側のアプリケーションを作る仕組みでも利用されています。 また、デスクトップアプリやスマートフォンアプリ、IoT（Internet of Things）デバイスでもJavaScriptを使って動かせるものがあります。 このように、JavaScriptはかなり幅広い環境で動いているプログラミング言語で、さまざまな種類のアプリケーションを作成できます。  

### ES2015とは？

ES2015(ES6)は、ECMAScript 6th editionの6を取ってES6と呼ばれることもあります(正式名称はES2015)。  
ただし、どちらの名称でも問題はないです。エンジニアコミュニティではES6の名称の方が浸透しているらしい。  

### 大文字と小文字を区別する

JavaScriptは大文字小文字を区別します。たとえば、次のようにnameという変数を大文字と小文字で書いた場合に、 それぞれは別々のnameとNAMEという名前の変数として認識されます。

```tsx
// `name`という名前の変数を宣言
const name = "azu";
// `NAME`という名前の変数を宣言
const NAME = "azu";
```

また、大文字で開始しなければならない訳ではありません。あくまで別々の名前として認識されるというだけになっています。  

### 予約語を持つ

JavaScriptには特別な意味を持つキーワードのことを予約語と言います。 このキーワードと同じ名前の変数や関数は宣言できません。 先ほどの、変数を宣言するconstも予約語のひとつです。 そのためconstという名前の変数名は宣言できません。  

### 文はセミコロンで区切られる

JavaScriptは、文（Statement）ごとに処理していき、文はセミコロン（;）によって区切られます。 特殊なルールに基づき、セミコロンがない文も、行末に自動でセミコロンが挿入されるという仕組みも持っています。1 しかし、暗黙的なものへ頼ると意図しない挙動が発生するため、セミコロンは常に書くようにします （詳細は「文と式」の章で解説します）。  

また、スペース、タブ文字などは空白文字（ホワイトスペース）と呼ばれます。 これらの空白文字を文にいくつ置いても挙動に違いはありません。  

たとえば、次の1足す1を行う2つの文は、+の前後の空白文字の個数に違いはありますが、動作としてはまったく同じ意味となります。  

```tsx
// 式や文の間にスペースがいくつあっても同じ意味となる
1 + 1;
1   +   1;
```

### strict mode

JavaScriptにはstrict modeという実行モードが存在しています。 名前のとおり厳格な実行モードで、古く安全でない構文や機能が一部禁止されています。  


"use strict"という文字列をファイルまたは関数の先頭に書くことで、そのスコープにあるコードはstrict modeで実行されます。 また、後述する"Module"の実行コンテキストでは、このstrict modeがデフォルトとなっています。  

```tsx
"use strict";
// このコードはstrict modeで実行される
```

strict modeでは、evalやwithといったレガシーな機能や構文を禁止します。 また、明らかな問題を含んだコードに対しては早期的に例外を投げることで、開発者が間違いに気づきやすくしてくれます。  

たとえば、次のようなconstなどのキーワードを含まずに変数を宣言しようとした場合に、strict modeでは例外が発生します。 strict modeでない場合は、例外が発生せずにグローバル変数が作られます。  

```tsx
"use strict";
mistypedVariable = 42; // => ReferenceError

```

このように、strict modeでは開発者が安全にコードを書けるように、JavaScriptの落とし穴を一部ふさいでくれます。 そのため、常にstrict modeで実行できるコードを書くことが、より安全なコードにつながります。  

本書では、明示的に「strict modeではない」ことを宣言した場合を除き、 すべてstrict modeとして実行できるコードを扱います。  

### 実行コンテキスト: ScriptとModule

JavaScriptの実行コンテキストとして"Script"と"Module"があります。 コードを書く場合には、この2つの実行コンテキストの違いを意識することは多くありません。  

"Script"の実行コンテキストは、多くの実行環境ではデフォルトの実行コンテキストです。 "Script"の実行コンテキストでは、デフォルトはstrict modeではありません。  

"Module"の実行コンテキストは、JavaScriptをモジュールとして実行するために、ECMAScript 2015で導入されたものです。 "Module"の実行コンテキストでは、デフォルトがstrict modeとなり、古く安全でない構文や機能は一部禁止されています。 また、モジュールの機能は"Module"の実行コンテキストでしか利用できません。モジュールについての詳細は「ECMAScriptモジュール」の章で解説します。  

### JavaScriptの仕様は毎年更新される

最後に、JavaScriptの仕様であるECMAScriptは毎年更新され、JavaScriptには新しい構文や機能が増え続けています。 そのため、この書籍で学んだ後もまだまだ知らなかったことが出てくるはずです。  

一方で、ECMAScriptは後方互換性が慎重に考慮されているため、過去に書いたJavaScriptのコードが動かなくなる変更はほとんど入りません。 そのため、この書籍で学んだことのすべてが無駄になることはありません。  

ECMAScriptの仕様がどのように策定されているかについては「ECMAScript」の章で解説します。  

## ◆コメント

コメントはプログラムとして評価されないため、ソースコードの説明を書くために利用されています。 この書籍でも、JavaScriptのソースコードを解説するためにコメントを使っていきます。  

コメントの書き方には、一行コメントと複数行コメントの2種類があります。  

### 一行コメント

一行コメントは名前のとおり、一行ずつコメントを書く際に利用します。 // 以降から行末までがコメントとして扱われるため、プログラムとして評価されません。  

```tsx
// 一行コメント
// この部分はコードとして評価されない
```

### 複数行コメント

複数行コメントは名前のとおり、複数行のコメントを書く際に利用します。 一行コメントとは違い複数行をまとめて書けるので、長い説明を書く際に利用されています。  

/* と */で囲まれた範囲がコメントとして扱われるため、プログラムとして評価されません。  

```tsx
/*
   複数行コメント
   囲まれている範囲がコードとして評価されない
 */

```

```tsx
/* ネストされた /* 複数行コメント */ は書けない */
```

### HTML-likeコメント

ES2015から後方互換性のための仕様としてHTML-likeコメントが追加されました。 このHTML-likeコメントは、ブラウザの実装に合わせた後方互換性のための仕様として定義されています。HTML-likeコメントは名前のとおり、HTMLのコメントと同じ表記です。

```tsx
<!-- この行はコメントと認識される
console.log("この行はJavaScriptのコードとして実行される");
-->  この行もコメントと認識される
```

ここでは、 <!-- と --> がそれぞれ一行コメントとして認識されます。

JavaScriptをサポートしていないブラウザでは、<script>タグを正しく認識できないために書かれたコードが表示されていました。 それを避けるために<script>の中をHTMLコメントで囲み、表示はされないが実行されるという回避策が取られていました。 今は<script>タグをサポートしていないブラウザはないため、この回避策は不要です。

```tsx
<script language="javascript">
<!--
  document.bgColor = "brown";
// -->
</script>
```

一方、<script>タグ内、つまりJavaScript内にHTMLコメントが書かれているサイトは残っています。 このようなサイトでもJavaScriptが動作するという、後方互換性のための仕様として追加されています。

歴史的経緯は別として、ECMAScriptではこのように後方互換性が慎重に取り扱われます。 ECMAScriptは一度入った仕様が使えなくなることはほとんどないため、基本文法で覚えたことが使えなくなることはありません。 一方で、仕様が更新されるたびに新しい機能が増えるため、それを学び続けることには変わりありません。

## ◆変数と宣言

プログラミング言語には、文字列や数値などのデータに名前をつけて、繰り返し利用できるようにする変数という機能があります。JavaScriptには「これは変数です」という宣言をするキーワードとして、 const、let、varの3つがあります。

varはもっとも古くからある変数宣言のキーワードですが、意図しない動作を作りやすい問題が知られています。 そのためECMAScript 2015で、varの問題を改善するためにconstとletという新しいキーワードが導入されました。

この章ではconst、let、varの順に、それぞれの方法で宣言した変数の違いについて見ていきます。

### [ES2015] const

constキーワードでは、再代入できない変数の宣言とその変数が参照する値（初期値）を定義できます。次のように、constキーワードに続いて変数名を書き、代入演算子（=）の右辺に変数の初期値を書いて変数を定義できます。

```tsx
const 変数名 = 初期値;
```

次のコードではbookTitleという変数を宣言し、初期値が"JavaScript Primer"という文字列であることを定義しています。

```tsx
const bookTitle = "JavaScript Primer";
```

const、let、varどのキーワードも共通の仕組みですが、変数同士を,（カンマ）で区切ることにより、同時に複数の変数を定義できます。

次のコードでは、bookTitleとbookCategoryという変数を順番に定義しています。

```tsx
const bookTitle = "JavaScript Primer",
      bookCategory = "プログラミング";
```

これは次のように書いた場合と同じ意味になります。

```tsx
const bookTitle = "JavaScript Primer";
const bookCategory = "プログラミング";
```

また、constは再代入できない変数を宣言するキーワードです。 そのため、constキーワードで宣言した変数に対して、後から値を代入することはできません。

次のコードでは、constで宣言した変数bookTitleに対して値を再代入しているため、次のようなエラー（TypeError）が発生します。 エラーが発生するとそれ以降の処理は実行されなくなります。

```tsx
const bookTitle = "JavaScript Primer";
bookTitle = "新しいタイトル"; // => TypeError: invalid assignment to const 'bookTitle'
```

一般的に変数への再代入は「変数の値は最初に定義した値と常に同じである」という参照透過性と呼ばれるルールを壊すため、バグを発生させやすい要因として知られています。そのため、変数に対して値を再代入する必要がない場合は、constキーワードで変数宣言することを推奨しています。

変数に値を再代入したいケースとして、ループなどの反復処理の途中で特定の変数が参照する値を変化させたい場合があります。 そのような場合には、変数への再代入が可能なletキーワードを利用します。